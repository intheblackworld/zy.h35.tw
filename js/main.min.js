function preventIphoneScale(){document.addEventListener("touchstart",function(e){e.touches.length>1&&e.preventDefault()},{passive:!1});var e=0;document.addEventListener("touchend",function(t){var i=(new Date).getTime();i-e<=300&&t.preventDefault(),e=i},{passive:!1}),document.addEventListener("gesturestart",function(e){e.preventDefault()},{passive:!1})}function setJsKeyup(){$(document).on("keyup",function(e){switch(event.keyCode){case 38:goTriggerPage("up");break;case 40:goTriggerPage("down")}})}function setJsTouch(){var e,t,i=150;$(document).on("touchstart",function(t){console.log("true"),e=t.originalEvent.touches[0].clientY}),$(document).on("touchend",function(s){t=s.originalEvent.changedTouches[0].clientY,i<Math.abs(e-t)&&goTriggerPage(e>t?"down":"up")})}function setJsMousewheel(){$(document).off("mousewheel DOMMouseScroll"),$(document).on("mousewheel DOMMouseScroll",function(e){var t,i=e.originalEvent.wheelDelta&&(e.originalEvent.wheelDelta>0?1:-1)||e.originalEvent.detail&&(e.originalEvent.detail>0?-1:1);$(document).off("mousewheel DOMMouseScroll"),i>0?goTriggerPage("up"):i<0&&goTriggerPage("down"),t=setTimeout(function(){setJsMousewheel(),clearTimeout(t)},1100)})}function goTriggerPage(e){var t=vm.page.nowPage,i=$("html").hasClass("ie")?"vh":"px";!vm.modalStatus||vm.status.cover||vm.status.sidemenu||!vm.status.pageScroll||vm.status.intro||("up"===e&&(t-=1,t<1&&(t=0)),"down"===e&&(t+=1,t>=secArr.length&&(t=secArr.length-1)),vm.page.dir=e,vm.page.nowPage=t,vm.pageStyleObject.transform="translateY(-"+windowHeight*(secArr[t].page-1)+i+")")}function preventPullToRefresh(e){var t=!1;document.querySelector(e).addEventListener("touchstart",function(e){if(1===e.touches.length){var i=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;t=0===i}}),document.querySelector(e).addEventListener("touchmove",function(e){t&&(t=!1)})}function mobileFullHeight(){var e=$("html").hasClass("ie");if(!e){var t=.01*window.innerHeight;windowHeight=100*t,document.documentElement.style.setProperty("--vh",t+"px")}}function objectDeepCopy(e){return"object"==typeof e&&null!==e&&JSON.parse(JSON.stringify(e))}function goKV1Stage(){$(".section-kv").addClass("on")}function setPageAnimatClass(e){secArr[e].name,vm.page.dir,$(".section"),e=vm.page.nowPage;secArr.forEach(function(t,i){var s=secArr[i].name;i==e&&("kv2"!==s?$(".section-"+s).removeClass("out").addClass("on"):$(".section-kv").removeClass("on").addClass("out")),e>1&&$(".section-kv").removeClass("on").addClass("out")})}function getSectionPos(){for(var e in secArr.length=0,secObj)secArr.push({type:e,page:secObj[e].page,name:secObj[e].name})}function compass(){var e=$(".compass_item");e.removeClass("compass-slide-top compass-slide-prev compass-slide-active compass-slide-next compass-slide-bottom"),compassArr[compassArr.length-1].addClass("compass-slide-prev"),compassArr[0].addClass("compass-slide-active"),compassArr[1].addClass("compass-slide-next"),compassArr[2].addClass("compass-slide-bottom"),compassArr[3].addClass("compass-slide-bottom"),compassArr[4].addClass("compass-slide-bottom"),compassArr[compassArr.length-2].addClass("compass-slide-top");var t=$(".compass-slide-active").attr("data-compass-index");vm.compass.use=vm.compass.swiper[t],clearInterval(compassTimer),compassTimer=setInterval(function(){compassNext()},3e3)}function compassPrev(){compassArr.unshift(compassArr[compassArr.length-1]),compassArr.pop(),compass()}function compassNext(){compassArr.push(compassArr[0]),compassArr.shift(),compass()}function videoSlide(){var e=$(".video_item");e.removeClass("video-prev video-active video-next"),videoArr.length>2?(videoArr[videoArr.length-1].addClass("video-prev"),videoArr[0].addClass("video-active"),videoArr[1].addClass("video-next"),videoArr.forEach(function(e,t){t>1&&t<videoArr.length-1&&$(e).addClass("video-next")})):videoArr[0].addClass("video-active")}function viewportDetect(e){var t,i,s,a=!1,o=0,n=0,c=[],r=e;$(document).on("touchstart",r,function(e){t=e.targetTouches[0].pageX,i=e.targetTouches[0].pageY,e.target.offsetLeft,e.target.offsetTop,e.touches.length>=2&&(c=e.touches),a=!0}),$(document).on("touchmove",r,function(e){if(1==e.touches.length&&a){var m,l=e.target.offsetWidth,d=e.target.offsetHeight,p=(l*s-l)/2,g=(d*s-d)/2,u=e.targetTouches[0].pageX,v=e.targetTouches[0].pageY;o+=(parseInt(u)-parseInt(t))/5,n+=(parseInt(v)-parseInt(i))/5,o>0&&o>p&&(o=p),o<0&&o<-p&&(o=-p),n>0&&n>g&&(n=g),n<0&&n<-g&&(n=-g),m=-1!=r.indexOf("leaflets")?"translate("+o+"px, "+n+"px) scale("+s.toFixed(2)+")":"translateX("+o+"px) scale("+s.toFixed(2)+")",$(this).css({transform:m})}if(e.touches.length>=2&&a){var h,b=e.touches;s,s=getDistance(b[0],b[1])/getDistance(c[0],c[1]),s<1&&(s=1,o=0,n=0),s>2&&(s=2),h=-1!=r.indexOf("leaflets")?"translate("+o+"px, "+n+"px) scale("+s.toFixed(2)+")":"translateX("+o+"px) scale("+s.toFixed(2)+")",$(this).css({transform:h})}}),$(document).on("touchend",r,function(e){a&&(a=!1)})}function getDistance(e,t){var i=t.pageX-e.pageX,s=t.pageY-e.pageY;return Math.sqrt(i*i+s*s)}for(var regexer={txt1:/^.{1,}/,txt2:/^.{2,}/,txt3:/^.{3,}/,txt8:/^.{8,}/,txt10:/^.{10,}/,txt300:/^.{300,}/,img:/^.{1,}\.(gif|jpg|jpeg|bmp|png)$/,num:/^[1-9]{1}[\d]{0,}/,url:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:\/?#[\]@!\$&'\(\)\*\+,;=.]+$/,email:/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/,phone:/[0-9|\-|\(|\)]{7,}/},mobiles=new Array("midp","j2me","avant","docomo","novarra","palmos","palmsource","240x320","opwv","chtml","pda","windows ce","mmp/","blackberry","mib/","symbian","wireless","nokia","hand","mobi","phone","cdm","up.b","audio","sie-","sec-","samsung","htc","mot-","mitsu","sagem","sony","alcatel","lg","eric","vx","NEC","philips","mmm","xx","panasonic","sharp","wap","sch","rover","pocket","benq","java","pt","pg","vox","amoi","bird","compal","kg","voda","sany","kdd","dbt","sendo","sgh","gradi","jb","dddi","moto","iphone","android","iPod","incognito","webmate","dream","cupcake","webos","s8000","bada","googlebot-mobile"),ua=navigator.userAgent.toLowerCase(),isMobile=!1,i=0;i<mobiles.length;i++)if(ua.indexOf(mobiles[i])>0){isMobile=!0;break}var secObj={};isMobile?(secObj.kv1={page:1,name:"kv"},secObj.kv2={page:1,name:"kv2"},secObj.p1={page:2,name:"youtube-video"},secObj.p2={page:3,name:"livable"},secObj.p3={page:4,name:"speed"},secObj.p4={page:5,name:"monster"},secObj.p5={page:6,name:"greensea"},secObj.p6={page:7,name:"team"},secObj.p7={page:8,name:"intro"},secObj.p8={page:9,name:"contact"}):(secObj.kv1={page:1,name:"kv"},secObj.kv2={page:1,name:"kv2"},secObj.p1={page:2,name:"youtube-video"},secObj.p2={page:3,name:"livable"},secObj.p3={page:4,name:"speed"},secObj.p4={page:5,name:"monster"},secObj.p5={page:6,name:"greensea"},secObj.p6={page:7,name:"team"},secObj.p7={page:8,name:"intro"},secObj.p8={page:9,name:"template"},secObj.p9={page:10,name:"contact"});var windowWidth,secArr=[],windowHeight=100,vm=new Vue({el:"#app",data:function(){return{status:{kv:!0,cover:!0,intro:!1,monster:!1,reservation:!1,usableSubmit:!1,messagesModal:!1,formSent:!1,footer:!1,sidemenu:!1,newsModal:!1,agreementModal:!1,cubeModal:!1,msgModal:!1,livableModal:!1,teamModal:!1,leafletsModal:!1,pageScroll:!0},menu:[{title:"超宜居星球",anchor:"p2",icon:"img/icon-livable.png"},{title:"超光速傳輸",anchor:"p3",icon:"img/icon-speed.png"},{title:"怪獸級綠海",anchor:"p4",icon:"img/icon-master.png"},{title:"超魔方空間",anchor:"cube",icon:"img/icon-cube.png"},{title:"超硬派天團",anchor:"p6",icon:"img/icon-team.png"}],beef:{},videos:{active:0,items:[{videoId:"QYa1IPINq-c"}]},leaflets:{use:{},items:[{id:1,name:"正義聯盟-怪獸級綠海X零負評環境",img:"justic-environment.jpg",thumb:"justic-environment-small.jpg"},{id:2,name:"正義聯盟-正義降臨X英雄再起",img:"justic-reservation.jpg",thumb:"justic-reservation-small.jpg"},{id:3,name:"正義聯盟-宇宙無敵規格X絕對正義價格 ",img:"justic-specification.jpg",thumb:"justic-specification-small.jpg"}]},compass:{use:{name:"宜居星球",title:"img/kv2/livable.png?v1",content:"52公頃北台最大自辦重劃區<br/>緊鄰424公頃大台北都會公園<br/>環境空間鈔票通通變大",icon:"img/kv2/livable-icon.png?v1"},swiper:[{name:"宜居星球",title:"img/kv2/livable.png?v1",content:"52公頃北台最大自辦重劃區<br/>緊鄰424公頃大台北都會公園<br/>環境空間鈔票通通變大",icon:"img/kv2/livable-icon.png?v1"},{name:"光速傳輸",title:"img/kv2/speed.png?v1",content:"300秒新莊副都心，600秒台北國門<br/>3高 :  中山高、五楊高、汐五高<br/>4快 :  台1、台64、台65、新北環快<br/>4捷 :  環狀線、蘆洲線、機場線、五股泰山線<br/>多波段漲幅高潮不斷",icon:"img/kv2/speed-icon.png?v1"},{name:"魔方空間",title:"img/kv2/cube.png?v1",content:"異次元神奇魔方空間<br/>18坪2房 秘密基地<br/>26坪3房 星際戰艦",icon:"img/kv2/cube-icon.png?v1"},{name:"怪獸綠海",title:"img/kv2/monster.png?v1",content:" 424公頃水岸大台北都會公園<br/>侏儸紀公園綠海約16座大安森林<br/>磁吸當代暴龍迅猛龍",icon:"img/kv2/monster-icon.png?v1"},{name:"硬派天團",title:"img/kv2/team.png?v1",content:"強強聯手重磅出擊<br/>哈佛名門億萬豪宅御用呂建勳<br/>兩岸盛名珩荷設計總監徐慈姿",icon:"img/kv2/team-icon.png?v1"},{name:"逆天規格",title:"img/kv2/standard.png?v1",content:"台北十大豪宅規格<br/>七星級飯店公設<br/>國際級水岸公園生活",icon:"img/kv2/standard-icon.png?v1"},{name:"戰鬥機能",title:"img/kv2/superiority.png?v1",content:"工商路戰鬥級全方位商圈<br/>全聯 屈臣氏 寶雅 麥當勞 銀行<br/>零售藥妝百貨超商一舉到位",icon:"img/kv2/superiority-icon.png?v1"}]},team:{use:{id:1,img:"img/work/1/1/1.jpg",title:"default",name:"徐慈姿",style:"background-image: linear-gradient(to top, #701418, #a61e23);"},female:{active:1,name:"徐慈姿",style:" background-image: linear-gradient(to top, #0f1160, #244696);",works:[{id:1,img:"img/work/1/1/1.jpg",title:"大隱頤海大院"},{id:2,img:"img/work/1/1/2.jpg",title:"大隱頤海大院"},{id:3,img:"img/work/1/1/3.jpg",title:"大隱頤海大院"},{id:4,img:"img/work/1/2/1.jpg",title:"大隱藍海"},{id:5,img:"img/work/1/2/2.jpg",title:"大隱藍海"},{id:6,img:"img/work/1/2/3.jpg",title:"大隱藍海"},{id:7,img:"img/work/1/3/1.jpg",title:"興富發新富邑"},{id:8,img:"img/work/1/3/2.jpg",title:"興富發新富邑"},{id:9,img:"img/work/1/3/3.jpg",title:"興富發新富邑"},{id:10,img:"img/work/1/4/1.jpg",title:"寶鋪縱橫天廈"},{id:11,img:"img/work/1/4/2.jpg",title:"寶鋪縱橫天廈"},{id:12,img:"img/work/1/4/3.jpg",title:"寶鋪縱橫天廈"},{id:13,img:"img/work/1/4/4.jpg",title:"寶鋪縱橫天廈"}]},male:{active:1,name:"呂建勳",style:"background-image: linear-gradient(to top, #701418, #a61e23);",works:[{id:1,img:"img/work/2/p1.jpg",title:"國美A1"},{id:2,img:"img/work/2/p2.jpg",title:"都峰苑"},{id:3,img:"img/work/2/p3.jpg",title:"敦南樞苑"},{id:4,img:"img/work/2/p4.jpg",title:"翔譽之心"},{id:5,img:"img/work/2/p5.jpg",title:"德杰flora"}]}},page:{nowPage:0,dir:"down"},pageStyleObject:{transform:""},form:{name:"",job:"",email:"",phone:"",city_id:null,district_id:null,message:"",status:1,booking:0,note:"",agree:!0},area:{},cube:{use:{title:"aaaaaa",pic:"img/cube/p1.jpg"},swiper:[{title:"aaaaaa",pic:"img/cube/p1.jpg"},{title:"bbbbbb",pic:"img/cube/p2.jpg"},{title:"cccccc",pic:"img/cube/p3.jpg"},{title:"dddddd",pic:"img/cube/p4.jpg"},{title:"aaaaaa",pic:"img/cube/p1.jpg"},{title:"bbbbbb",pic:"img/cube/p2.jpg"},{title:"cccccc",pic:"img/cube/p3.jpg"},{title:"dddddd",pic:"img/cube/p4.jpg"}]},slideshow:{livable:{active:0,num:4,sec:3e3,time:null},monster:{active:0,sec:3e3,time:null,items:[{name:"棒球場",pic:"slide1.jpg"},{name:"寵物公園",pic:"slide2.jpg"},{name:"寵物公園",pic:"slide3.jpg"},{name:"大台北都會公園",pic:"slide4.jpg"},{name:"洲子洋公園",pic:"slide5.jpg"},{name:"關渡夕照",pic:"slide6.jpg"}]},greensea:{active:0,sec:3e3,time:null,items:[{name:"火鍋美饌",pic:"slide1.jpg"},{name:"全聯購物",pic:"slide2.jpg"},{name:"家樂福超市",pic:"slide3.jpg"},{name:"傳統市場",pic:"slide4.jpg"},{name:"寵物餐廳",pic:"slide5.jpg"},{name:"寶雅百貨",pic:"slide6.jpg"}]},cube:{active:0,num:4}},validation:{email:!1,name:!1,phone:!1},validationRules:{email:regexer.email,name:regexer.txt2,phone:regexer.phone},hasError:{email:!1,name:!1,phone:!1}}},computed:{modalStatus:function(){var e=!0;return(this.status.reservation||this.status.messagesModal||this.status.cubeModal||this.status.livableModal||this.status.leafletsModal||this.status.newsModal||this.status.msgModal)&&(e=!1),e}},beforeMount:function(){var e=this;$.get("js/zip.json",function(t){t="object"==typeof t?t:JSON.parse(t),e.area=t,e.form.city_id=Object.keys(e.area)[0],e.form.district_id=Object.keys(e.area[e.form.city_id].district)[0]})},methods:{switchStatus:function(e,t){this.status[e]=t,"livableModal"===e&&0==t&&($(".planet-sec .section_content").css("width","100%"),$(".planet-sec .section_content .section_info").css("width","100%"))},switchSidemenuStatus:function(){this.status.sidemenu=!this.status.sidemenu},closeModalMessages:function(e){"done"==e&&(this.status.reservation=!1),"again"==e&&(this.status.reservation=!0),this.status.messagesModal=!1},setPageTransform:function(e){var t=this,i=$("html").hasClass("ie")?"vh":"px";this.status.intro=!1,"cube"!==e?(this.status.sidemenu=!1,secArr.forEach(function(s,a){s.type==e&&(t.status.cover=!1,t.page.nowPage=a,t.pageStyleObject.transform="translateY(-"+windowHeight*(s.page-1)+i+")")})):this.status.msgModal=!0},setLoopSlide:function(e){var t=this;clearInterval(t.slideshow[e].time),t.slideshow[e].time=setInterval(function(){t.slideshow[e].active++,t.slideshow[e].active>t.slideshow[e].items.length-1&&(t.slideshow[e].active=0)},t.slideshow[e].sec)},send:function(){var e=this;$.ajax({url:"api.php",method:"POST",dataType:"json",data:{justice:e.form},error:function(t,i,s){e.status.reservation=!1,e.status.formSent=!1,e.status.messagesModal=!0,console.log(t.responseText)},success:function(t){+t&&(e.form={name:"",job:"",email:"",phone:"",city_id:null,district_id:null,message:"",status:1,booking:0,note:"",agree:!0},e.status.formSent=!0,e.status.reservation=!1,e.status.messagesModal=!0,e.form.city_id=Object.keys(e.area)[0],e.form.district_id=Object.keys(e.area[e.form.city_id].district)[0])}})},validator:function(){var e=this,t=!1;$.each(e.validation,function(t,i){var s=e.form[t]&&e.validationRules[t].test(e.form[t]);e.validation[t]=s,e.hasError[t]=!s}),$.each(e.validation,function(e,i){if(t=!0,!i)return t=!1,!1}),e.form.agree||(t=!1),e.status.usableSubmit=t},updateDistrict:function(e){this.form.district_id=Object.keys(this.area[e].district)[0]},triggerTeamModal:function(e){this.status.teamModal=!0;var t=parseInt(this.team[e].active)-1;this.team.use=objectDeepCopy(this.team[e].works[t]),this.team.use.style=this.team[e].style,this.team.use.name=this.team[e].name,this.team.use.which=e},triggerLeafletsModal:function(e){this.status.leafletsModal=!0,this.leaflets.use=this.leaflets.items[e]},nextTeamModal:function(){var e=this.team.use.which,t=this.team[e].works;this.team[e].active=this.team[e].active+1,this.team[e].active>t.length&&(this.team[e].active=1),this.triggerTeamModal(e)},prevTeamModal:function(){var e=this.team.use.which,t=this.team[e].works;this.team[e].active=this.team[e].active-1,this.team[e].active<=0&&(this.team[e].active=t.length),this.triggerTeamModal(e)},setVideoActive:function(e){this.videos.active>e?$(".youtube-video .slide_prev").trigger("click"):$(".youtube-video .slide_next").trigger("click"),this.videos.active=e}},created:function(){getSectionPos()},watch:{"page.nowPage":function(e){setPageAnimatClass(e),1===e&&compass(),4===e&&this.setLoopSlide("monster"),5===e&&this.setLoopSlide("greensea")},"form.agree":function(e){e?this.validator():this.status.usableSubmit=!1},"status.intro":function(e){e||(this.status.pageScroll=!0)},"status.livableModal":function(e){viewportDetect("#modal_livable .modal_container")},"status.leafletsModal":function(e){viewportDetect("#modal_leaflets .modal_container")}},mounted:function(){$("body").addClass("loaded")}});preventPullToRefresh("html"),$(window).on("resize",function(){var e;windowWidth=$(window).width(),windowWidth>=992&&(vm.status.sidemenu=!1,vm.status.intro=!1),mobileFullHeight(),setJsMousewheel(),vm.setPageTransform(secArr[vm.page.nowPage].type),e=setTimeout(function(){$(".cubeslide").css({"max-height":$(".cubeslide-active").height(),height:"100%"}),$(".youtube-slideshow").css({height:$(".video_item").height()}),$(".cubeslide .slide_prev").css("left","calc(50% - "+($(".cubeslide-active").width()/2-10)+"px)"),$(".cubeslide .slide_next").css("right","calc(50% - "+($(".cubeslide-active").width()/2-10)+"px)"),clearTimeout(e)},1e3)}).on("load",function(){var e;mobileFullHeight(),setJsMousewheel(),setJsTouch(),setJsKeyup(),preventIphoneScale(),e=setTimeout(function(){vm.status.cover=!1,$(".cover-kv").addClass("out"),clearTimeout(e)},1e3),$(".cubeslide").css({"max-height":$(".cubeslide-active").height(),height:"100%"}),$(".youtube-slideshow").css({height:$(".video_item").height()}),$(".cubeslide .slide_prev").css("left","calc(50% - "+($(".cubeslide-active").width()/2-20)+"px)"),$(".cubeslide .slide_next").css("right","calc(50% - "+($(".cubeslide-active").width()/2-20)+"px)")}),$(".unscroll").on("mouseover",function(e){vm.status.pageScroll=!1}).on("mouseout",function(e){vm.status.pageScroll=!0});var compassTimer,compassArr=[];$(".compass_item").each(function(e,t){compassArr.push($(t))}),$(document).on("click",".compass-slide-prev",function(e){compassPrev()}),$(document).on("click",".compass-slide-next",function(e){compassNext()});var videoArr=[];$(".video_item").each(function(e,t){videoArr.push($(t))}),videoSlide(),$(document).on("click",".youtube-video .slide_prev",function(e){videoArr.unshift(videoArr[videoArr.length-1]),videoArr.pop(),videoSlide(),vm.videos.active=vm.videos.active-1,vm.videos.active<0&&(vm.videos.active=vm.videos.items.length-1)}),$(document).on("click",".youtube-video .slide_next",function(e){videoArr.push(videoArr[0]),videoArr.shift(),videoSlide(),vm.videos.active=vm.videos.active+1,vm.videos.active>=vm.videos.items.length&&(vm.videos.active=0)});